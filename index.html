<!doctype html>
<html lang="en">
  <head>
    <!-- Meta Tags -->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="title" content="sudo-self.com" />
    <meta
      name="description"
      content="Veteran, web developer, and IT professional passionate about technology and innovation."
    />
    <meta name="author" content="sudo-self" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="icon192.png" />

    <!-- Open Graph Metadata -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://sudo-self.com" />
    <meta property="og:title" content="sudo-self.com" />
    <meta
      property="og:description"
      content="Veteran, web developer, and IT professional passionate about technology and innovation."
    />
    <meta property="og:image" content="https://sudo-self.com/sudo-self.jpg" />

    <!-- Twitter Metadata -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://sudo-self.com" />
    <meta property="twitter:title" content="sudo-self.com" />
    <meta
      property="twitter:description"
      content="Veteran, web developer, and IT professional passionate about technology and innovation."
    />
    <meta
      property="twitter:image"
      content="https://sudo-self.com/sudo-self.jpg"
    />

    <!-- Favicons and App Icons -->
    <link rel="shortcut icon" href="favicon.ico" />
    <link
      rel="icon"
      type="image/x-icon"
      sizes="16x16 32x32"
      href="favicon.ico"
    />
    <link rel="icon" sizes="32x32" href="favicon.png" />
    <link rel="icon" sizes="192x192" href="icon192.png" />
    <link rel="apple-touch-icon" sizes="any" href="apple-touch-icon.png" />

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Page Title -->
    <title>sudo-self.com</title>
    <style>
      body {
        margin: 0;
        background-color: #1a1a1a;
        color: white;
      }
      canvas {
        display: block;
      }
      .footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        color: white;
        text-align: center;
        padding: 10px;
        font-size: 1rem;
        font-family: Arial, sans-serif;
      }
      .footer a {
        color: white;
        text-decoration: none;
      }
      .footer a:hover {
        color: #8e8e8e;
      }
    </style>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/examples/js/loaders/RGBELoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.7/build/dat.gui.min.js"></script>

    <script>
      let scene, camera, renderer, model;
      let controls, ambientLight, directionalLight;
      let gui, params;
      let shaderEnabled = false; // Shader toggle flag
      let defaultMaterial, shaderMaterial;
      let hdrTexture;

      // Shader code (simple example shader)
      const vertexShader = `
      varying vec3 vColor;
      void main() {
        vColor = position.xyz;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `;
      const fragmentShader = `
      uniform vec3 color;
      varying vec3 vColor;
      void main() {
        gl_FragColor = vec4(vColor * color, 1.0);
      }
    `;

      // Initialize Scene
      function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(
          75,
          window.innerWidth / window.innerHeight,
          0.1,
          1000,
        );
        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Set up orbit controls
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.25;
        controls.screenSpacePanning = false;
        controls.maxPolarAngle = Math.PI / 2;

        // Add lights
        ambientLight = new THREE.AmbientLight(0x404040, 4); // Ambient light
        scene.add(ambientLight);
        directionalLight = new THREE.DirectionalLight(0xffffff, 5);
        directionalLight.position.set(1, 1, 1).normalize();
        scene.add(directionalLight);

        // Load the HDR environment map
        const hdrLoader = new THREE.RGBELoader();
        hdrLoader.load("./elmo.hdr", function (texture) {
          hdrTexture = texture;
          hdrTexture.mapping = THREE.EquirectangularReflectionMapping;

          // Only set the environment, not the background
          scene.environment = hdrTexture;

          // Load the GLB model
          const loader = new THREE.GLTFLoader();
          loader.load("/model.glb", (gltf) => {
            model = gltf.scene;
            scene.add(model);
            model.scale.set(1, 1, 1); // Initial scale
            model.rotation.y = Math.PI / -2;


            // Store the default material for the model
            defaultMaterial = model.children[0].material;

            // Create the shader material
            shaderMaterial = new THREE.ShaderMaterial({
              uniforms: {
                color: { value: new THREE.Color(0xff0000) }, // Red shader color
              },
              vertexShader: vertexShader,
              fragmentShader: fragmentShader,
            });

            // Apply default material or shader material based on the shader flag
            toggleShader();
          });
        });

        // Set camera position
        camera.position.z = 3;

        // Create GUI for controlling the model and light
        gui = new dat.GUI();
        params = {
          scale: 1,
          rotationX: 0,
          rotationY: 0,
          rotationZ: 0,
          positionX: 0,
          positionY: 0,
          positionZ: 0,
          lightIntensity: 1,
          lightColor: "#ffffff",
          shader: false, // Shader is off by default
        };

        // Add controls to GUI for model
        gui.add(params, "scale", 0.1, 5).onChange(() => {
          if (model) model.scale.set(params.scale, params.scale, params.scale);
        });
        gui.add(params, "rotationX", 0, Math.PI * 2).onChange(() => {
          if (model) model.rotation.x = params.rotationX;
        });
        gui.add(params, "rotationY", 0, Math.PI * 2).onChange(() => {
          if (model) model.rotation.y = params.rotationY;
        });
        gui.add(params, "rotationZ", 0, Math.PI * 2).onChange(() => {
          if (model) model.rotation.z = params.rotationZ;
        });
        gui.add(params, "positionX", -5, 5).onChange(() => {
          if (model) model.position.x = params.positionX;
        });
        gui.add(params, "positionY", -5, 5).onChange(() => {
          if (model) model.position.y = params.positionY;
        });
        gui.add(params, "positionZ", -5, 5).onChange(() => {
          if (model) model.position.z = params.positionZ;
        });

        // Add controls to GUI for light
        gui.add(params, "lightIntensity", 0, 5).onChange(() => {
          if (ambientLight) ambientLight.intensity = params.lightIntensity;
          if (directionalLight)
            directionalLight.intensity = params.lightIntensity;
        });
        gui.addColor(params, "lightColor").onChange(() => {
          if (ambientLight) ambientLight.color.set(params.lightColor);
          if (directionalLight) directionalLight.color.set(params.lightColor);
        });

        // Add shader toggle to GUI
        gui.add(params, "shader").onChange(() => {
          shaderEnabled = params.shader;
          toggleShader();
        });

        // Export function
        const exportParams = () => {
          const data = JSON.stringify(params, null, 2);
          const blob = new Blob([data], { type: "application/json" });
          const link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "model-params.json";
          link.click();
        };
        gui.add({ export: exportParams }, "export");

        animate();
      }

      // Toggle shader material
      function toggleShader() {
        if (shaderEnabled && model) {
          model.children[0].material = shaderMaterial;
        } else if (model) {
          model.children[0].material = defaultMaterial;
        }
      }

      // Render and animate the scene
      function animate() {
        requestAnimationFrame(animate);
        controls.update(); // Update controls
        renderer.render(scene, camera);
      }

      // Window resize handling
      window.addEventListener("resize", () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
      });

      init();
    </script>

    <!-- Footer -->
    <div class="footer">
      <p><a href="https://sudo-self.com" target="_blank">sudo-self.com</a></p>
    </div>
  </body>
</html>








